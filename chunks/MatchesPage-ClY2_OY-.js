const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["chunks/MatchSection-D3SvhB33.js","chunks/mui-core-BpoTvZsj.js","chunks/mui-icons-58CkGrMT.js","index-DnYbmb9J.js","chunks/http-Dos3PyFQ.js","chunks/vendor-47kkluUf.js","assets/index-tn0RQdqM.css","chunks/useErrorHandler-DVQpOzEU.js"])))=>i.map(i=>d[i]);
import{r as e,j as a,B as r,p as t,k as n,C as s,m as i,T as l,d as u,G as c}from"./mui-core-BpoTvZsj.js";import{_ as o,b as d,R as h,c as m,U as p}from"../index-DnYbmb9J.js";import{u as x}from"./useErrorHandler-DVQpOzEU.js";import{b as f}from"./vendor-47kkluUf.js";const j=e.lazy(()=>o(()=>import("./MatchSection-D3SvhB33.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),g=()=>a.jsxs(r,{sx:{mb:4},children:[a.jsx(t,{variant:"text",width:"200px",sx:{mb:2}}),a.jsx(n,{spacing:2,children:[1,2,3].map(e=>a.jsx(t,{variant:"rectangular",height:150},e))})]}),b=({tipo:r,users:t,hasMore:n,onLoadMore:s,onUserClick:i,fullWidth:l})=>a.jsx(e.Suspense,{fallback:a.jsx(g,{}),children:a.jsx(j,{tipo:r,users:t,hasMore:n,onLoadMore:s,onUserClick:i,fullWidth:l})}),y=e=>e&&"object"==typeof e?e.nombre_habilidad||e.nombre||JSON.stringify(e):String(e),_=5,C=3,M=3,k={mutual:"Coincidencia mutua",teach:"Puede enseñarte",learn:"Puede aprender de ti"},E={mutual:"Coincidencias mutuas",teach:"Usuarios que te pueden enseñar",learn:"Usuarios que pueden aprender de ti"},A={mutual:"No tienes coincidencias mutuas aún.",teach:"No hay usuarios que te puedan enseñar tus habilidades deseadas.",learn:"No hay usuarios que puedan aprender tus habilidades."};const S=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const t=f(),{showToast:o}=d(),[j,g]=e.useState({mutual:1,teach:1,learn:1}),y=e.useCallback(e=>{t(h.USUARIO_BY_ID(e))},[t]),{data:k,loading:E,error:A,refetch:S}=((a,r={})=>{const{onSuccess:t,onError:n,initialData:s=null}=r,[i,l]=e.useState(s),[u,c]=e.useState(!1),o=e.useRef(!0),d=e.useRef(null),{error:h,handleError:m,clearError:p}=x(),f=e.useCallback(async()=>{c(!0),p(),d.current&&d.current.abort();const e=new AbortController;d.current=e;try{const r=await a({signal:e.signal});if(!o.current)return;l(r),t?.(r)}catch(r){if(!o.current)return;"ERR_CANCELED"===r?.code||"CanceledError"===r?.name||(m(r,"useFetchData"),n?.(r))}finally{o.current&&c(!1)}},[a,p,m,t,n]);return e.useEffect(()=>(o.current=!0,f(),()=>{o.current=!1,d.current&&d.current.abort()}),[]),{data:i,loading:u,error:h,refetch:e.useCallback(async()=>{await f()},[f]),clearError:p}})(async({signal:e})=>(await m.get(p.coincidencias,{signal:e})).data||[],{initialData:[]}),{mutual:U,teach:v,learn:w}=e.useMemo(()=>Array.isArray(k)?(e=>{const a=e=>Array.isArray(e)&&e.length>0,r=e=>!Array.isArray(e)||0===e.length;return{mutual:e.filter(e=>a(e.puede_ensenar)&&a(e.puede_aprender)),teach:e.filter(e=>a(e.puede_ensenar)&&r(e.puede_aprender)),learn:e.filter(e=>a(e.puede_aprender)&&r(e.puede_ensenar))}})(k):{mutual:[],teach:[],learn:[]},[k]);if(e.useEffect(()=>{A&&o(A,"error")},[A,o]),E&&0===U.length&&0===v.length&&0===w.length)return a.jsx(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:a.jsx(s,{size:60})});const L={mutual:U.slice(0,j.mutual*_),teach:v.slice(0,j.teach*C),learn:w.slice(0,j.learn*M)},R={mutual:U.length>j.mutual*_,teach:v.length>j.teach*C,learn:w.length>j.learn*M};return a.jsx(r,{sx:{bgcolor:"background.default",minHeight:"calc(100vh - 64px)"},children:a.jsxs(i,{maxWidth:"md",sx:{py:4},children:[a.jsxs(n,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:2},children:[a.jsx(l,{variant:"h4",component:"h1",sx:{fontWeight:600},children:"Matches"}),a.jsx(u,{variant:"contained",onClick:S,disabled:E,children:"Actualizar coincidencias"})]}),a.jsx(b,{tipo:"mutual",users:L.mutual,hasMore:R.mutual,onLoadMore:()=>g(e=>({...e,mutual:e.mutual+1})),onUserClick:y,fullWidth:!0}),a.jsxs(c,{container:!0,spacing:2,children:[a.jsx(c,{size:{xs:12,md:6},children:a.jsx(b,{tipo:"teach",users:L.teach,hasMore:R.teach,onLoadMore:()=>g(e=>({...e,teach:e.teach+1})),onUserClick:y})}),a.jsx(c,{size:{xs:12,md:6},children:a.jsx(b,{tipo:"learn",users:L.learn,hasMore:R.learn,onLoadMore:()=>g(e=>({...e,learn:e.learn+1})),onUserClick:y})})]})]})})}},Symbol.toStringTag,{value:"Module"}));export{k as M,E as a,A as b,S as c,y as n};
