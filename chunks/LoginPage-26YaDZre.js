import{r as e,j as t,m as i,B as a,T as s,n as r,o,I as n,d as l,C as d,k as p}from"./mui-core-BpoTvZsj.js";import{u as m}from"./form-CP-dV_Zb.js";import{V as u,b as x}from"./mui-icons-Bcg_AGA-.js";import{a as c,b as h,R as b,A as w,e as f,E as j}from"../index-BF7ALLnG.js";import{a as k}from"./axiosPublic-B-eD8mPF.js";import{b as g}from"./vendor-47kkluUf.js";import"./http-Dos3PyFQ.js";const S=()=>{const{register:S,handleSubmit:W,formState:{errors:C}}=m(),v=g(),[y,I]=e.useState(!1),[B,R]=e.useState(!1),{login:T}=c(),{showToast:E}=h();return t.jsx(i,{component:"main",maxWidth:"xs",sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsxs(a,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",py:4},children:[t.jsx(s,{component:"h1",variant:"h4",sx:{fontWeight:600,mb:3},children:"Inicia Sesión"}),t.jsxs(a,{component:"form",onSubmit:W(async e=>{I(!0);try{const t=(await k.post(w.LOGIN,{email:e.email,password:e.password})).data.key;await T(t),v(b.HOME)}catch(t){if(I(!1),t.response?.data){const e=f(t.response.data);E(e||j.unexpected,"error")}else t.request?E(j.network,"error"):E(t.message||j.unexpected,"error")}}),noValidate:!0,sx:{width:"100%"},children:[t.jsx(r,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Correo Electrónico",name:"email",autoComplete:"email",autoFocus:!0,...S("email",{required:"El email es obligatorio",pattern:{value:/^\S+@\S+$/i,message:"Formato de email incorrecto"}}),error:!!C.email,helperText:C.email?C.email.message:"",sx:{"& input:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px transparent inset",WebkitTextFillColor:"inherit",caretColor:"inherit",borderRadius:"inherit"},"& input:-webkit-autofill:hover":{WebkitBoxShadow:"0 0 0 100px transparent inset"},"& input:-webkit-autofill:focus":{WebkitBoxShadow:"0 0 0 100px transparent inset"},"& input:-webkit-autofill:active":{WebkitBoxShadow:"0 0 0 100px transparent inset"}}}),t.jsx(r,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Contraseña",type:B?"text":"password",id:"password",autoComplete:"current-password",InputProps:{endAdornment:t.jsx(o,{position:"end",children:t.jsx(n,{"aria-label":"toggle password visibility",onClick:()=>R(!B),onMouseDown:e=>e.preventDefault(),edge:"end",children:B?t.jsx(u,{}):t.jsx(x,{})})})},...S("password",{required:"La contraseña es obligatoria"}),error:!!C.password,helperText:C.password?C.password.message:"",sx:{"& input:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px transparent inset",WebkitTextFillColor:"inherit",caretColor:"inherit",borderRadius:"inherit"},"& input:-webkit-autofill:hover":{WebkitBoxShadow:"0 0 0 100px transparent inset"},"& input:-webkit-autofill:focus":{WebkitBoxShadow:"0 0 0 100px transparent inset"},"& input:-webkit-autofill:active":{WebkitBoxShadow:"0 0 0 100px transparent inset"}}}),t.jsx(l,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:y,children:y?t.jsx(d,{size:24,color:"inherit"}):"INICIAR SESIÓN"}),t.jsxs(p,{spacing:1,sx:{mt:1},children:[t.jsx(l,{color:"secondary",onClick:()=>v(b.REGISTER),fullWidth:!0,children:"¿No tienes cuenta? Regístrate aquí"}),t.jsx(l,{variant:"text",onClick:()=>v(b.ROOT),fullWidth:!0,children:"Volver"})]})]})]})})};export{S as default};
