const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["chunks/MatchSection-pNlZpmIn.js","chunks/mui-core-BpoTvZsj.js","chunks/mui-icons-Bcg_AGA-.js","index-BF7ALLnG.js","chunks/http-Dos3PyFQ.js","chunks/vendor-47kkluUf.js","assets/index-tn0RQdqM.css","chunks/useErrorHandler-C__lpL1Z.js"])))=>i.map(i=>d[i]);
import{r as e,j as a,B as r,p as t,k as n,C as s,m as i,T as l,d as u,G as c}from"./mui-core-BpoTvZsj.js";import{_ as o,b as d,R as h,c as m,U as p}from"../index-BF7ALLnG.js";import{u as f}from"./useErrorHandler-C__lpL1Z.js";import{b as x}from"./vendor-47kkluUf.js";const j=e.lazy(()=>o(()=>import("./MatchSection-pNlZpmIn.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),g=({tipo:s,users:i,hasMore:l,onLoadMore:u,onUserClick:c,fullWidth:o})=>{const d=()=>a.jsxs(r,{sx:{mb:4},children:[a.jsx(t,{variant:"text",width:"200px",sx:{mb:2}}),a.jsx(n,{spacing:2,children:[1,2,3].map(e=>a.jsx(t,{variant:"rectangular",height:150},e))})]});return a.jsx(e.Suspense,{fallback:a.jsx(d,{}),children:a.jsx(j,{tipo:s,users:i,hasMore:l,onLoadMore:u,onUserClick:c,fullWidth:o})})},b=e=>e&&"object"==typeof e?e.nombre_habilidad||e.nombre||JSON.stringify(e):String(e),y=5,_=3,C=3,E={mutual:"Coincidencia mutua",teach:"Puede enseñarte",learn:"Puede aprender de ti"},M={mutual:"Coincidencias mutuas",teach:"Usuarios que te pueden enseñar",learn:"Usuarios que pueden aprender de ti"},S={mutual:"No tienes coincidencias mutuas aún.",teach:"No hay usuarios que te puedan enseñar tus habilidades deseadas.",learn:"No hay usuarios que puedan aprender tus habilidades."};const k=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const t=x(),{showToast:o}=d(),[j,b]=e.useState({mutual:1,teach:1,learn:1}),[E,M]=e.useState([]),[S,k]=e.useState([]),[A,U]=e.useState([]),v=e.useCallback(e=>{t(h.USUARIO_BY_ID(e))},[t]),{data:w,loading:L,error:R,refetch:z}=((a,r=[],t={})=>{const{onSuccess:n,onError:s,initialData:i=null}=t,[l,u]=e.useState(i),[c,o]=e.useState(!1),d=e.useRef(!0),h=e.useRef(null),{error:m,handleError:p,clearError:x}=f(),j=e.useCallback(async()=>{o(!0),x(),h.current&&h.current.abort();const e=new AbortController;h.current=e;try{const r=await a({signal:e.signal});if(!d.current)return;u(r),n?.(r)}catch(r){if(!d.current)return;"ERR_CANCELED"===r?.code||"CanceledError"===r?.name||(p(r,"useFetchData"),s?.(r))}finally{d.current&&o(!1)}},[a,x,p,n,s]);return e.useEffect(()=>(d.current=!0,j(),()=>{d.current=!1,h.current&&h.current.abort()}),r),{data:l,loading:c,error:m,refetch:e.useCallback(async()=>{await j()},[j]),clearError:x}})(async({signal:e})=>(await m.get(p.coincidencias,{signal:e})).data||[],[],{initialData:[]});if(e.useEffect(()=>{if(Array.isArray(w)){const{mutual:e,teach:a,learn:r}=(e=>{const a=e=>Array.isArray(e)&&e.length>0,r=e=>!Array.isArray(e)||0===e.length;return{mutual:e.filter(e=>a(e.puede_ensenar)&&a(e.puede_aprender)),teach:e.filter(e=>a(e.puede_ensenar)&&r(e.puede_aprender)),learn:e.filter(e=>a(e.puede_aprender)&&r(e.puede_ensenar))}})(w);M(e),k(a),U(r)}},[w]),e.useEffect(()=>{R&&o(R,"error")},[R,o]),L&&0===E.length&&0===S.length&&0===A.length)return a.jsx(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:a.jsx(s,{size:60})});const D={mutual:E.slice(0,j.mutual*y),teach:S.slice(0,j.teach*_),learn:A.slice(0,j.learn*C)},I={mutual:E.length>j.mutual*y,teach:S.length>j.teach*_,learn:A.length>j.learn*C};return a.jsx(r,{sx:{bgcolor:"background.default",minHeight:"calc(100vh - 64px)"},children:a.jsxs(i,{maxWidth:"md",sx:{py:4},children:[a.jsxs(n,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:2},children:[a.jsx(l,{variant:"h4",component:"h1",sx:{fontWeight:600},children:"Matches"}),a.jsx(u,{variant:"contained",onClick:z,disabled:L,children:"Actualizar coincidencias"})]}),a.jsx(g,{tipo:"mutual",users:D.mutual,hasMore:I.mutual,onLoadMore:()=>b(e=>({...e,mutual:e.mutual+1})),onUserClick:v,fullWidth:!0}),a.jsxs(c,{container:!0,spacing:2,children:[a.jsx(c,{size:{xs:12,md:6},children:a.jsx(g,{tipo:"teach",users:D.teach,hasMore:I.teach,onLoadMore:()=>b(e=>({...e,teach:e.teach+1})),onUserClick:v})}),a.jsx(c,{size:{xs:12,md:6},children:a.jsx(g,{tipo:"learn",users:D.learn,hasMore:I.learn,onLoadMore:()=>b(e=>({...e,learn:e.learn+1})),onUserClick:v})})]})]})})}},Symbol.toStringTag,{value:"Module"}));export{E as M,M as a,S as b,k as c,b as n};
