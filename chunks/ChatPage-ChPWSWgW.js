import{r as e,j as t,B as n,C as a,T as r,n as o,o as i,L as s,D as c,z as u,E as d,F as l,l as m,s as h,H as f,y as g,I as p,J as y,K as w}from"./mui-core-CIRgtlGz.js";import{S as b,m as x}from"./mui-icons-BQP8OJas.js";import{u as v}from"./useConversations-CjQ7vxVG.js";import{c as j,C as M,A as k,b as S}from"../index-Dz5qx50A.js";import{c as C}from"./vendor-CoiQIOlL.js";import"./http-Dos3PyFQ.js";const P=({selectedConversationId:g,onSelectConversation:p})=>{const[y,w]=e.useState(""),{conversations:x,loading:j}=v();if(j)return t.jsx(n,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:t.jsx(a,{})});if(!x||0===x.length)return t.jsxs(n,{p:3,textAlign:"center",children:[t.jsx(r,{color:"text.secondary",children:"No tienes conversaciones aún"}),t.jsx(r,{variant:"body2",color:"text.secondary",mt:1,children:"Inicia una conversación desde la lista de amigos"})]});const M=x.filter(e=>{if(!y)return!0;const t=e.otherUser,n=y.toLowerCase();return t?.nombre?.toLowerCase().includes(n)||t?.apellido?.toLowerCase().includes(n)||t?.email?.toLowerCase().includes(n)});return t.jsxs(n,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[t.jsx(n,{p:2,pb:1,children:t.jsx(o,{id:"search-conversations",name:"search-conversations",fullWidth:!0,size:"small",placeholder:"Buscar conversación...",value:y,onChange:e=>w(e.target.value),InputProps:{startAdornment:t.jsx(i,{position:"start",children:t.jsx(b,{})})}})}),t.jsx(s,{sx:{flex:1,overflow:"auto",py:0},children:0===M.length?t.jsx(n,{p:3,textAlign:"center",children:t.jsx(r,{color:"text.secondary",children:"No se encontraron conversaciones"})}):M.map((e,a)=>{const o=e.otherUser,i=e.id===g,s=e.unreadCount>0;return t.jsxs(n,{children:[a>0&&t.jsx(c,{}),t.jsx(u,{disablePadding:!0,children:t.jsxs(d,{selected:i,onClick:()=>p(e.id),sx:{py:2,"&.Mui-selected":{backgroundColor:"action.selected"}},children:[t.jsx(l,{children:t.jsx(m,{badgeContent:s?e.unreadCount:0,color:"error",overlap:"circular",children:t.jsx(h,{src:o?.media||o?.foto_perfil,alt:`${o?.nombre||""} ${o?.apellido||""}`,children:o?.nombre?.[0]?.toUpperCase()||"?"})})}),t.jsx(f,{primary:t.jsxs(r,{variant:"subtitle2",fontWeight:s?"bold":"normal",children:[o?.nombre," ",o?.apellido]}),secondary:t.jsx(r,{component:"span",variant:"body2",color:"text.secondary",sx:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:s?"medium":"normal"},children:e.ultimo_mensaje?.contenido||(e.fecha_actualizacion?new Date(e.fecha_actualizacion).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit",hour12:!1}):"Sin mensajes")})})]})})]},e.id)})})]})},D=(t,n)=>{const a=e.useRef(null),r=e.useRef(null),o=e.useRef(!0),i=e.useRef(0),s=e.useRef(!1),c=e.useRef(0),u=e.useRef(!0),d=e.useRef(!0),l=()=>{a.current&&setTimeout(()=>{if(a.current){const e=a.current.scrollHeight;a.current.scrollTop=e,c.current=e,u.current=!0}},0)};return e.useEffect(()=>{o.current&&t.length>0&&!n&&a.current&&(o.current=!1,s.current=!0,l())},[t.length,n]),e.useEffect(()=>{s.current&&a.current&&c.current>0&&(0===a.current.scrollTop&&a.current.scrollHeight>100?a.current.scrollTop=c.current:a.current.scrollTop!==c.current&&(c.current=a.current.scrollTop))},[t.length]),e.useEffect(()=>{!d.current&&t.length>i.current&&(u.current||0===i.current)&&l(),i.current=t.length},[t.length]),{messagesContainerRef:a,messagesEndRef:r,handleScroll:()=>{u.current=(()=>{if(!a.current)return!1;const{scrollHeight:e,clientHeight:t,scrollTop:n}=a.current;return e-(n+t)<50})()},scrollToBottom:l,resetScrollState:()=>{d.current=!0,o.current=!0,i.current=0,s.current=!1,c.current=0,u.current=!0},isInitialLoadRef:d}},W=6048e5,T=Symbol.for("constructDateFrom");function H(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&T in e?e[T](t):e instanceof Date?new e.constructor(t):new Date(t)}function E(e,t){return H(t||e,e)}let N={};function Y(){return N}function O(e,t){const n=Y(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,r=E(e,t?.in),o=r.getDay(),i=(o<a?7:0)+o-a;return r.setDate(r.getDate()-i),r.setHours(0,0,0,0),r}function z(e,t){return O(e,{...t,weekStartsOn:1})}function I(e,t){const n=E(e,t?.in),a=n.getFullYear(),r=H(n,0);r.setFullYear(a+1,0,4),r.setHours(0,0,0,0);const o=z(r),i=H(n,0);i.setFullYear(a,0,4),i.setHours(0,0,0,0);const s=z(i);return n.getTime()>=o.getTime()?a+1:n.getTime()>=s.getTime()?a:a-1}function R(e){const t=E(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function q(e,...t){const n=H.bind(null,t.find(e=>"object"==typeof e));return t.map(n)}function F(e,t){const n=E(e,t?.in);return n.setHours(0,0,0,0),n}function A(e){return H(e,Date.now())}function B(e,t,n){const[a,r]=q(0,e,t);return+F(a)===+F(r)}function L(e){return!(!((t=e)instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t))&&"number"!=typeof e||isNaN(+E(e)));var t}const X={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function U(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Q={date:U({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:U({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:U({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},$={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function G(e){return(t,n)=>{let a;if("formatting"===(n?.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,r=n?.width?String(n.width):t;a=e.formattingValues[r]||e.formattingValues[t]}else{const t=e.defaultWidth,r=n?.width?String(n.width):e.defaultWidth;a=e.values[r]||e.values[t]}return a[e.argumentCallback?e.argumentCallback(t):t]}}function K(e){return(t,n={})=>{const a=n.width,r=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],o=t.match(r);if(!o)return null;const i=o[0],s=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(s)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(s,e=>e.test(i)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(s,e=>e.test(i));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;return{value:u,rest:t.slice(i.length)}}}function _(e){return(t,n={})=>{const a=t.match(e.matchPattern);if(!a)return null;const r=a[0],o=t.match(e.parsePattern);if(!o)return null;let i=e.valueCallback?e.valueCallback(o[0]):o[0];i=n.valueCallback?n.valueCallback(i):i;return{value:i,rest:t.slice(r.length)}}}const J={code:"en-US",formatDistance:(e,t,n)=>{let a;const r=X[e];return a="string"==typeof r?r:1===t?r.one:r.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a},formatLong:Q,formatRelative:(e,t,n,a)=>$[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:G({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:G({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:G({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:G({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:G({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:_({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:K({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:K({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:K({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:K({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:K({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function V(e,t){const n=E(e,t?.in),a=function(e,t){const[n,a]=q(0,e,t),r=F(n),o=F(a),i=+r-R(r),s=+o-R(o);return Math.round((i-s)/864e5)}(n,function(e,t){const n=E(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}(n));return a+1}function Z(e,t){const n=E(e,t?.in),a=+z(n)-+function(e,t){const n=I(e,t),a=H(e,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),z(a)}(n);return Math.round(a/W)+1}function ee(e,t){const n=E(e,t?.in),a=n.getFullYear(),r=Y(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,i=H(t?.in||e,0);i.setFullYear(a+1,0,o),i.setHours(0,0,0,0);const s=O(i,t),c=H(t?.in||e,0);c.setFullYear(a,0,o),c.setHours(0,0,0,0);const u=O(c,t);return+n>=+s?a+1:+n>=+u?a:a-1}function te(e,t){const n=E(e,t?.in),a=+O(n,t)-+function(e,t){const n=Y(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,r=ee(e,t),o=H(t?.in||e,0);return o.setFullYear(r,0,a),o.setHours(0,0,0,0),O(o,t)}(n,t);return Math.round(a/W)+1}function ne(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const ae={y(e,t){const n=e.getFullYear(),a=n>0?n:1-n;return ne("yy"===t?a%100:a,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):ne(n+1,2)},d:(e,t)=>ne(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>ne(e.getHours()%12||12,t.length),H:(e,t)=>ne(e.getHours(),t.length),m:(e,t)=>ne(e.getMinutes(),t.length),s:(e,t)=>ne(e.getSeconds(),t.length),S(e,t){const n=t.length,a=e.getMilliseconds();return ne(Math.trunc(a*Math.pow(10,n-3)),t.length)}},re="midnight",oe="noon",ie="morning",se="afternoon",ce="evening",ue="night",de={G:function(e,t,n){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});default:return n.era(a,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),a=t>0?t:1-t;return n.ordinalNumber(a,{unit:"year"})}return ae.y(e,t)},Y:function(e,t,n,a){const r=ee(e,a),o=r>0?r:1-r;if("YY"===t){return ne(o%100,2)}return"Yo"===t?n.ordinalNumber(o,{unit:"year"}):ne(o,t.length)},R:function(e,t){return ne(I(e),t.length)},u:function(e,t){return ne(e.getFullYear(),t.length)},Q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return ne(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return ne(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,n){const a=e.getMonth();switch(t){case"M":case"MM":return ae.M(e,t);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,n){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return ne(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,n,a){const r=te(e,a);return"wo"===t?n.ordinalNumber(r,{unit:"week"}):ne(r,t.length)},I:function(e,t,n){const a=Z(e);return"Io"===t?n.ordinalNumber(a,{unit:"week"}):ne(a,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):ae.d(e,t)},D:function(e,t,n){const a=V(e);return"Do"===t?n.ordinalNumber(a,{unit:"dayOfYear"}):ne(a,t.length)},E:function(e,t,n){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,n,a){const r=e.getDay(),o=(r-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return ne(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,n,a){const r=e.getDay(),o=(r-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return ne(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,n){const a=e.getDay(),r=0===a?7:a;switch(t){case"i":return String(r);case"ii":return ne(r,t.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const a=e.getHours();let r;switch(r=12===a?oe:0===a?re:a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){const a=e.getHours();let r;switch(r=a>=17?ce:a>=12?se:a>=4?ie:ue,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return ae.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):ae.H(e,t)},K:function(e,t,n){const a=e.getHours()%12;return"Ko"===t?n.ordinalNumber(a,{unit:"hour"}):ne(a,t.length)},k:function(e,t,n){let a=e.getHours();return 0===a&&(a=24),"ko"===t?n.ordinalNumber(a,{unit:"hour"}):ne(a,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):ae.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):ae.s(e,t)},S:function(e,t){return ae.S(e,t)},X:function(e,t,n){const a=e.getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return me(a);case"XXXX":case"XX":return he(a);default:return he(a,":")}},x:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"x":return me(a);case"xxxx":case"xx":return he(a);default:return he(a,":")}},O:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+le(a,":");default:return"GMT"+he(a,":")}},z:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+le(a,":");default:return"GMT"+he(a,":")}},t:function(e,t,n){return ne(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return ne(+e,t.length)}};function le(e,t=""){const n=e>0?"-":"+",a=Math.abs(e),r=Math.trunc(a/60),o=a%60;return 0===o?n+String(r):n+String(r)+t+ne(o,2)}function me(e,t){if(e%60==0){return(e>0?"-":"+")+ne(Math.abs(e)/60,2)}return he(e,t)}function he(e,t=""){const n=e>0?"-":"+",a=Math.abs(e);return n+ne(Math.trunc(a/60),2)+t+ne(a%60,2)}const fe=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},ge=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},pe={p:ge,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],a=n[1],r=n[2];if(!r)return fe(e,t);let o;switch(a){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;default:o=t.dateTime({width:"full"})}return o.replace("{{date}}",fe(a,t)).replace("{{time}}",ge(r,t))}},ye=/^D+$/,we=/^Y+$/,be=["D","DD","YY","YYYY"];const xe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ve=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,je=/^'([^]*?)'?$/,Me=/''/g,ke=/[a-zA-Z]/;function Se(e,t,n){const a=Y(),r=n?.locale??a.locale??J,o=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,i=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,s=E(e,n?.in);if(!L(s))throw new RangeError("Invalid time value");let c=t.match(ve).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,pe[t])(e,r.formatLong)}return e}).join("").match(xe).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Ce(e)};if(de[t])return{isToken:!0,value:e};if(t.match(ke))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});r.localize.preprocessor&&(c=r.localize.preprocessor(s,c));const u={firstWeekContainsDate:o,weekStartsOn:i,locale:r};return c.map(a=>{if(!a.isToken)return a.value;const o=a.value;(!n?.useAdditionalWeekYearTokens&&function(e){return we.test(e)}(o)||!n?.useAdditionalDayOfYearTokens&&function(e){return ye.test(e)}(o))&&function(e,t,n){const a=function(e,t,n){const a="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(be.includes(e))throw new RangeError(a)}(o,t,String(e));return(0,de[o[0]])(s,o,r.localize,u)}).join("")}function Ce(e){const t=e.match(je);return t?t[1].replace(Me,"'"):e}function Pe(e,t){return B(H(e,e),A(e))}function De(e,t,n){return function(e,t,n){const a=E(e,n?.in);return isNaN(t)?H(e,NaN):(a.setDate(a.getDate()+t),a)}(e,-1,n)}function We(e,t){return B(H(e,e),De(A(e)))}const Te={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},He={date:U({formats:{full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:U({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:U({formats:{full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Ee={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},Ne={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},Ye={code:"es",formatDistance:(e,t,n)=>{let a;const r=Te[e];return a="string"==typeof r?r:1===t?r.one:r.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"en "+a:"hace "+a:a},formatLong:He,formatRelative:(e,t,n,a)=>1!==t.getHours()?Ne[e]:Ee[e],localize:{ordinalNumber:(e,t)=>Number(e)+"º",era:G({values:{narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},defaultWidth:"wide"}),quarter:G({values:{narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:G({values:{narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},defaultWidth:"wide"}),day:G({values:{narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},defaultWidth:"wide"}),dayPeriod:G({values:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:_({matchPattern:/^(\d+)(º)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:K({matchPatterns:{narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},defaultParseWidth:"any"}),quarter:K({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:K({matchPatterns:{narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},defaultParseWidth:"any"}),day:K({matchPatterns:{narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:K({matchPatterns:{narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:1}},Oe=()=>({formatMessageDate:e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":Pe(t)?Se(t,"HH:mm",{locale:Ye}):We(t)?`Ayer ${Se(t,"HH:mm",{locale:Ye})}`:Se(t,"dd/MM/yyyy HH:mm",{locale:Ye})},groupMessagesByDate:e=>{const t={};return e.forEach(e=>{if(!e.fecha)return;const n=new Date(e.fecha);if(isNaN(n.getTime()))return;const a=(e=>Pe(e)?"Hoy":We(e)?"Ayer":Se(e,"dd MMMM yyyy",{locale:Ye}))(n);t[a]||(t[a]=[]),t[a].push(e)}),Object.entries(t).map(([e,t])=>({dateKey:e,messages:t}))}}),ze=e.memo(({otherUser:e,onBack:a})=>t.jsxs(g,{elevation:1,sx:{p:2,display:"flex",alignItems:"center",gap:2,borderRadius:0},children:[a&&t.jsx(p,{onClick:a,size:"small",children:"←"}),e?t.jsxs(t.Fragment,{children:[t.jsx(h,{src:e?.media||e?.foto_perfil,alt:`${e?.nombre||""} ${e?.apellido||""}`,children:e?.nombre?.[0]?.toUpperCase()||"?"}),t.jsxs(n,{children:[t.jsxs(r,{variant:"subtitle1",fontWeight:"bold",children:[e?.nombre," ",e?.apellido]}),t.jsx(r,{variant:"body2",color:"text.secondary",children:e?.email})]})]}):t.jsx(r,{variant:"subtitle1",fontWeight:"bold",children:"Conversación"})]}));ze.displayName="ChatHeader";const Ie=e.memo(({dateKey:e})=>t.jsx(n,{display:"flex",justifyContent:"center",my:2,children:t.jsx(r,{variant:"caption",color:"text.secondary",sx:{bgcolor:"background.paper",px:2,py:.5,borderRadius:2},children:e})}));Ie.displayName="DateDivider";const Re=e.memo(({message:e,isOwnMessage:a,formatMessageDate:o})=>t.jsx(n,{sx:{display:"flex",justifyContent:a?"flex-end":"flex-start",mb:1},children:t.jsxs(g,{elevation:1,sx:{p:1.5,maxWidth:"70%",bgcolor:a?"primary.main":"background.paper",color:a?"primary.contrastText":"text.primary",borderRadius:2,borderBottomRightRadius:a?4:16,borderBottomLeftRadius:a?16:4},children:[t.jsx(r,{variant:"body1",sx:{wordBreak:"break-word",whiteSpace:"pre-wrap"},children:e.contenido}),t.jsx(r,{variant:"caption",sx:{display:"block",textAlign:"right",mt:.5,opacity:.8},children:o(e.fecha)})]})}),(e,t)=>e.message.id===t.message.id&&e.isOwnMessage===t.isOwnMessage&&e.message.contenido===t.message.contenido&&e.message.fecha===t.message.fecha);Re.displayName="MessageBubble";const qe=({messages:e,currentUserId:a,formatMessageDate:r,containerRef:o,onScroll:i,endRef:s})=>0===e.length?t.jsx(n,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:"No hay mensajes"}):t.jsxs(n,{ref:o,onScroll:i,sx:{flex:1,overflow:"auto",p:2,display:"flex",flexDirection:"column",gap:1},children:[e.map(e=>t.jsxs(n,{children:[t.jsx(Ie,{dateKey:e.dateKey}),e.messages.map(e=>{const n=("object"==typeof e.remitente?e.remitente.id:e.remitente)===a;return t.jsx(Re,{message:e,isOwnMessage:n,formatMessageDate:r},e.id)})]},e.dateKey)),t.jsx("div",{ref:s})]}),Fe=e.memo(({value:e,onChange:n,onSubmit:r,onKeyPress:i,disabled:s})=>t.jsxs(g,{component:"form",onSubmit:r,sx:{p:2,display:"flex",gap:1,borderRadius:0},elevation:3,children:[t.jsx(o,{id:"message-input",name:"message-input",fullWidth:!0,multiline:!0,maxRows:4,placeholder:"Escribe un mensaje...",value:e,onChange:n,onKeyPress:i,disabled:s,variant:"outlined",size:"small"}),t.jsx(p,{color:"primary",type:"submit",disabled:!e.trim()||s,sx:{alignSelf:"flex-end"},children:s?t.jsx(a,{size:24}):t.jsx(x,{})})]}));Fe.displayName="MessageInput";const Ae=({state:e="empty"})=>{const o={empty:"No hay mensajes aún. ¡Envía el primero!",noConversation:"Selecciona una conversación para empezar a chatear",error:"Error al cargar los mensajes"};return"loading"===e?t.jsx(n,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:t.jsx(a,{})}):t.jsx(n,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:t.jsx(r,{color:"text.secondary",children:o[e]||o.empty})})},Be=({conversationId:a,otherUser:r,onBack:o})=>{const{showToast:i}=S(),s=e.useCallback(e=>{i(e,"error",5e3)},[i]),{messages:u,loading:d,error:l,sending:m,currentUserId:h,sendMessage:f}=((t,n)=>{const[a,r]=e.useState([]),[o,i]=e.useState(!0),[s,c]=e.useState(null),[u,d]=e.useState(!1),[l,m]=e.useState(null),[h,f]=e.useState(!0),g=e.useRef(null),p=e.useRef(0),y=e.useRef(null),w=e.useRef(null),b=e.useRef(!1),x=e.useCallback(async()=>{if(t)try{i(!0),c(null);const e=await j.get(M.mensajes(t),{params:{limit:50,ordering:"-enviado_en"}});if(!l){const e=await j.get(k.USER);m(e.data.id)}const n=[...e.data.map(e=>({...e,fecha:e.fecha||e.enviado_en}))].sort((e,t)=>(e.fecha?new Date(e.fecha):new Date(0))-(t.fecha?new Date(t.fecha):new Date(0)));r(n),n.length>0&&(p.current=n[n.length-1].id)}catch(e){404===e.response?.status?(c(null),r([])):c(e.response?.data?.detail||"Error al cargar mensajes")}finally{i(!1)}},[t,l]),v=e.useCallback(async e=>{if(t&&e.trim())try{d(!0);const n=await j.post(M.enviarMensaje(t),{contenido:e.trim()}),a={...n.data,fecha:n.data.fecha||n.data.enviado_en};return r(e=>[...e,a]),a}catch(a){if(n){const e=a.response?.data?.detail||"Error al enviar el mensaje. Por favor, intenta de nuevo.";n(e)}throw a}finally{d(!1)}},[t,n]),S=e.useCallback(()=>{if(t&&b.current){g.current&&g.current.close();try{const e=`/chat/conversaciones/${t}/stream/?last_id=${p.current}`;g.current=new EventSource(e),g.current.onmessage=e=>{try{const t=JSON.parse(e.data),n={...t,fecha:t.fecha||t.enviado_en};r(e=>[...e,n]),p.current=t.id}catch(t){}},g.current.onerror=e=>{g.current.close(),f(!1)}}catch(e){}}},[t]),C=e.useCallback(()=>{t&&(w.current=setInterval(async()=>{try{const e=[...(await j.get(M.mensajes(t),{params:{limit:50,ordering:"-enviado_en"}})).data.map(e=>({...e,fecha:e.fecha||e.enviado_en}))].sort((e,t)=>(e.fecha?new Date(e.fecha):new Date(0))-(t.fecha?new Date(t.fecha):new Date(0)));r(t=>{const n=t[t.length-1]?.id,a=e[e.length-1]?.id;return n!==a?e:t})}catch(e){}},3e4))},[t]),P=e.useCallback(async()=>{if(t&&l)try{r(e=>e.map(e=>({...e,leido:("object"==typeof e.remitente?e.remitente.id:e.remitente)!==l||e.leido})))}catch(e){}},[t,l,a]),D=e.useCallback(async e=>{try{await j.delete(M.eliminarMensaje(t,e)),r(t=>t.filter(t=>t.id!==e))}catch(n){throw n}},[]);return e.useEffect(()=>(p.current=0,b.current=!1,f(!0),t?x().then(()=>{b.current=!0,S()}):(r([]),i(!1)),()=>{g.current&&g.current.close(),y.current&&clearTimeout(y.current),w.current&&clearInterval(w.current)}),[t,x,S]),e.useEffect(()=>{if(!h&&t)return C(),()=>{w.current&&clearInterval(w.current)}},[h,t,C]),e.useEffect(()=>{a.length>0&&l&&P()},[a.length,l]),{messages:a,loading:o,error:s,sending:u,currentUserId:l,sendMessage:v,deleteMessage:D,fetchInitialMessages:x}})(a,s),{messagesContainerRef:g,messagesEndRef:p,handleScroll:y,scrollToBottom:w,resetScrollState:b}=D(u,d),{formatMessageDate:x,groupMessagesByDate:v}=Oe(),{messageInput:C,handleSendMessage:P,handleKeyPress:W,handleInputChange:T}=((t,n)=>{const[a,r]=e.useState(""),o=async e=>{if(e.preventDefault(),a.trim())try{await t(a),r(""),n?.()}catch(l){}};return{messageInput:a,setMessageInput:r,handleSendMessage:o,handleKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),o(e))},handleInputChange:e=>{r(e.target.value)}}})(f,w);if(e.useEffect(()=>{b()},[a,b]),!a)return t.jsx(n,{sx:{height:"100%",display:"flex",bgcolor:"grey.50"},children:t.jsx(Ae,{state:"noConversation"})});if(d&&0===u.length)return t.jsx(n,{sx:{height:"100%",display:"flex"},children:t.jsx(Ae,{state:"loading"})});if(l)return t.jsx(n,{sx:{height:"100%",display:"flex"},children:t.jsx(Ae,{state:"error"})});const H=v(u);return t.jsxs(n,{sx:{height:"100%",display:"flex",flexDirection:"column",bgcolor:"grey.50"},children:[t.jsx(ze,{otherUser:r,onBack:o}),t.jsx(qe,{messages:H,currentUserId:h,formatMessageDate:x,containerRef:g,onScroll:y,endRef:p}),t.jsx(c,{}),t.jsx(Fe,{value:C,onChange:T,onSubmit:P,onKeyPress:W,disabled:m})]})};function Le(){const r=y(),o=w(r.breakpoints.down("md")),{conversacionId:i}=C(),[s,c]=e.useState(i||null),{conversations:u}=v(),d=e.useMemo(()=>u.find(e=>e.id===s),[u,s]);return t.jsxs(n,{sx:{display:"flex",height:"calc(100vh - 100px)",gap:1,p:2,backgroundColor:"#f5f5f5"},children:[t.jsx(g,{sx:{flex:o?s?0:1:"0 0 320px",display:o&&s?"none":"flex",flexDirection:"column",overflow:"hidden"},children:t.jsx(e.Suspense,{fallback:t.jsx(n,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flex:1},children:t.jsx(a,{})}),children:t.jsx(P,{onSelectConversation:e=>{c(e)},selectedConversationId:s})})}),s&&t.jsx(g,{sx:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:t.jsx(e.Suspense,{fallback:t.jsx(n,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flex:1},children:t.jsx(a,{})}),children:t.jsx(Be,{conversationId:s,otherUser:d?.otherUser,onBack:o?()=>c(null):void 0})})}),!s&&!o&&t.jsx(g,{sx:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"},children:t.jsx(n,{sx:{textAlign:"center",color:"text.secondary"},children:"Selecciona una conversación para empezar a chatear"})})]})}export{Le as default};
